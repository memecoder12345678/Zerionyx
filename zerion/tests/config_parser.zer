load "libs.file"
load "libs.sys"
load "libs.string"
load "libs.list"
load "libs.termcolor"

config_path = argv>2

if not exists(config_path) do
    cprintln("Error: File does not exist", 'red', none, 'bold')
    exit(1)
done

defun parse_config(config_file)
    config = []
    lines = split(read(config_file), "\n")
    for i = 0 to len(lines) do
        line = lines>i
        if line != "" do
            vals = split(line, "=")
            append(config, [strip(to_str(vals>0), " "), strip(to_str(join("", list_slice(vals, 1, len(vals)))), " ")])
        done
    done
    return config
done

config = parse_config(config_path)

for i = 0 to len(config) do 
    cprint((config>i>0), 'magenta', none, 'bold')
    print(" = ")
    cprint((config>i>1), 'green', none, none)
    println("")
done
exit(0)
