load "libs.time"
load "libs.math"
load "libs.asyncio"

async defun task(name, duration)
    await asyncio.sleep(duration)
    return "Task '" + name + "' finished."
done

async defun run_concurrently()
    let start = time.time()
    
    let results = await asyncio.gather([
        task("A", 2),
        task("B", 1),
        task("C", 3)
    ])
    
    let duration = time.time() - start
    
    println("All tasks completed in ~" + to_str(math.round(duration)) + "s")
    println(results)
done

await run_concurrently()
